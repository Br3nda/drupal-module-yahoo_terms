<?php
// $Id: yahoo_terms.test,v 1.3 2010/10/07 02:48:22 taniwha Exp $

/**
 * @file
 * Unit Tests for yahoo_terms module
 * http://drupal.org/node/265762
 */

class YahooTermsTestCase extends DrupalWebTestCase {

  /**
   * User with rights to post SimpleTest Example content.
   */
  protected $privileged_user;

  /**
   * getInfo() returns properties that are displayed in the test selection form.
   */
  public static function getInfo() {
    return array(
      'name' => 'Yahoo Terms',
      'description' => 'tests for the Yahoo Terms',
      'group' => 'Yahoo Terms',
    );
  }

  /**
   * setUp() performs any pre-requisite tasks that need to happen. 
   */
  public function setUp() {
    // Enable any modules required for the test.
    parent::setUp('yahoo_terms');

    // Create and log in our privileged user.
    $this->privileged_user = $this->drupalCreateUser( array('yahoo_terms_usage'));
  }

  function testNoAdminAccess() {
    $this->drupalGet('admin/settings/yahoo_terms');
    $this->assertResponse(403);
  }

  /**
   * Test saving your settings
   */
  public function testSavingsettings() {
  
    $this->drupalLogin($this->privileged_user);

    $this->drupalGet('admin/settings/yahoo_terms');
    $edit = array(
      'yahoo_terms_appid' => 'Yahoo Terms module unittests',
      'yahoo_terms_taxonomy_limit' => '-1',
    );
    $this->drupalPost('admin/settings/yahoo_terms', $edit, 'Save configuration');
    $this->assertResponse(200);

  
    $this->drupalGet('admin/content/yahoo_terms');
    $this->assertText('Yahoo Terms module unittests');
    $this->assertResponse(200);
    $this->drupalLogout();

    $settings = array(
      'type' => 'sttory', // This replaces the default type
      'title' => $this->randomName(), // This appends a new field.
      'body' => 'HELLO WORD',
    );
    $node = $this->drupalCreateNode($settings);
    
  }



}
